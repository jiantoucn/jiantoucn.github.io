# 算盘模拟网页开发计划

本计划旨在开发一个纯前端（HTML/CSS/JS）的交互式算盘模拟网页，实现实时拨珠交互、数值显示及算术过程演示。

## 1. 项目结构
将在 `d:\jiantoucn.github.io\maths\abacus` 目录下创建以下文件：
- `index.html`: 页面主体结构。
- `style.css`: 算盘视觉样式与动画。
- `script.js`: 算盘逻辑、交互事件与自动计算控制。

## 2. 功能模块设计

### 2.1 算盘 UI 与交互 (HTML/CSS)
- **外观设计**：采用经典的 **“上二下五”** 算盘结构，共 13 档（满足百亿级计算）。
- **视觉元素**：
  - 算盘框、横梁、档杆。
  - 算珠：使用 CSS 实现立体感（阴影、高光）。
- **交互逻辑**：
  - **上珠（每颗代表 5）**：初始停靠在上方。点击将其向下拨（靠梁）表示 +5，反之 -5。
  - **下珠（每颗代表 1）**：初始停靠在下方。点击将其向上拨（靠梁）表示 +1，反之 -1。
  - **联动机制**：模拟真实物理特性。例如，拨动下珠第 3 颗向上时，第 1、2 颗也会随之向上。

### 2.2 核心逻辑 (JavaScript)
- **`Abacus` 类**：管理整个算盘的状态。
- **状态同步**：
  - 监听算珠的点击/拖拽事件，实时更新内部数据模型。
  - 实时计算当前盘面代表的数值，并显示在页面上方。
- **数值映射**：
  - 默认最右侧档位为个位（10^0）。
  - 支持 `setValue(number)` 方法，将十进制数字自动转换为对应的算珠位置状态。

### 2.3 算术运算与动画演示
- **输入界面**：提供输入框支持 `+ - * /` 表达式（如 `13+5*2`）。
- **自动演示逻辑**：
  1. **解析**：计算表达式的最终结果及关键中间步骤（如 `13` -> `23`）。
  2. **动画**：
     - 重置算盘。
     - 逐步展示数值变化：例如先拨出 `13`，暂停，再变化为 `23`。
     - 使用 CSS `transition` 配合 JS 延时，确保动画流畅可见。

### 2.4 响应式与兼容性
- 使用 Flexbox/Grid 布局，确保在 PC 和移动端（触摸操作）均能良好显示。
- 添加 `<meta name="viewport">` 标签适配移动端屏幕。

## 3. 实施步骤
1.  **初始化**：创建目录及基础文件结构。
2.  **UI 开发**：编写 HTML 结构及 CSS 样式，实现静态算盘模型。
3.  **交互开发**：编写 JS 实现算珠拨动逻辑与数值实时读取。
4.  **功能集成**：实现 `setValue` 自动拨珠功能，并对接算术表达式解析器。
5.  **优化与测试**：调整动画速度，优化触屏体验，验证计算准确性。
